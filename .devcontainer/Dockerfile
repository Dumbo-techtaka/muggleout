FROM ubuntu:22.04

# ìµœì†Œí•œì˜ ë„êµ¬ë§Œ ì„¤ì¹˜ (Node.js ì—†ìŒ!)
RUN apt-get update && apt-get install -y \
    curl \
    wget \
    git \
    sudo \
    vim \
    && rm -rf /var/lib/apt/lists/*

# ì¼ë°˜ ì‚¬ìš©ìž ìƒì„±
RUN useradd -m -s /bin/bash muggle && \
    echo "muggle:muggle" | chpasswd && \
    usermod -aG sudo muggle

# ìž‘ì—… ë””ë ‰í† ë¦¬
WORKDIR /workspace

# README ë³µì‚¬
COPY README.md ./

# í™˜ê²½ ì•ˆë‚´ ìŠ¤í¬ë¦½íŠ¸
RUN echo '#!/bin/bash' > /usr/local/bin/welcome && \
    echo 'echo "ðŸ§™ Wizardify - Muggle Environment"' >> /usr/local/bin/welcome && \
    echo 'echo ""' >> /usr/local/bin/welcome && \
    echo 'echo "This is a clean environment without:"' >> /usr/local/bin/welcome && \
    echo 'echo "  âŒ Node.js"' >> /usr/local/bin/welcome && \
    echo 'echo "  âŒ npm"' >> /usr/local/bin/welcome && \
    echo 'echo "  âŒ Oh My Zsh"' >> /usr/local/bin/welcome && \
    echo 'echo ""' >> /usr/local/bin/welcome && \
    echo 'echo "To install Node.js:"' >> /usr/local/bin/welcome && \
    echo 'echo "  curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -"' >> /usr/local/bin/welcome && \
    echo 'echo "  sudo apt-get install -y nodejs"' >> /usr/local/bin/welcome && \
    echo 'echo ""' >> /usr/local/bin/welcome && \
    echo 'echo "Then install wizardify:"' >> /usr/local/bin/welcome && \
    echo 'echo "  npm install -g wizardify"' >> /usr/local/bin/welcome && \
    chmod +x /usr/local/bin/welcome

# ì‹œìž‘ ì‹œ í™˜ì˜ ë©”ì‹œì§€
RUN echo "/usr/local/bin/welcome" >> /home/muggle/.bashrc

USER muggle