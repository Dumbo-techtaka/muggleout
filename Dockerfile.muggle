# 진짜 머글 환경 - Node.js도 npm도 없음!
FROM alpine:3.18

# 기본 도구만 (macOS처럼)
RUN apk add --no-cache \
    bash \
    curl \
    # Node.js와 npm은 설치하지 않음!

# 사용자 생성
RUN adduser -D -s /bin/bash muggle
WORKDIR /home/muggle

# README만 복사
COPY --chown=muggle:muggle README.md ./

USER muggle

# 머글을 위한 환경 안내
RUN echo 'echo "🧙 Welcome, Muggle!"' >> ~/.bashrc && \
    echo 'echo ""' >> ~/.bashrc && \
    echo 'echo "You need to install Node.js or Homebrew first:"' >> ~/.bashrc && \
    echo 'echo ""' >> ~/.bashrc && \
    echo 'echo "📦 Quick install (if you have curl):"' >> ~/.bashrc && \
    echo 'echo "   curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -"' >> ~/.bashrc && \
    echo 'echo "   sudo apk add nodejs npm"' >> ~/.bashrc && \
    echo 'echo ""' >> ~/.bashrc && \
    echo 'echo "Then install wizardify:"' >> ~/.bashrc && \
    echo 'echo "   npm install -g wizardify"' >> ~/.bashrc && \
    echo 'echo ""' >> ~/.bashrc

CMD ["/bin/bash"]